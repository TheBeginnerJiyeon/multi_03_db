-- CONNECTION: url=jdbc:oracle:thin:@//DESKTOP-MD0C8U4:1521/STR
-- New script in SCOTT.
-- Connection Type: dev 
-- Url: jdbc:oracle:thin:@//DESKTOP-MD0C8U4:1521/STR
-- workspace : C:\Users\dkswl\OneDrive\Documents\code_upload\Auto_window\multi_it\backend\db\db1
-- Date: 2024. 5. 9.
-- Time: 오전 1:46:52

DROP TABLE MEMBER_TEST;

-- 1. 회원 가입용 테이블 생성(MEMBER_TEST)
CREATE TABLE MEMBER_TEST(
	USER_NO NUMBER(20), 
	USER_ID VARCHAR2(20) CONSTRAINT PK1 PRIMARY KEY,
	USER_PWD VARCHAR2(100) CONSTRAINT NT1 NOT NULL,
	PNO VARCHAR2(100) CONSTRAINT NT2 NOT NULL,
	GENDER CHAR(5) CHECK (gender in('남' ,'여')),
	PHONE NUMBER(20),
	ADDRESS VARCHAR2(100),
	STATUS VARCHAR2(2) CHECK( STATUS IN ('Y','N')) NOT NULL,
	CONSTRAINT UN1 UNIQUE(PNO)
);

INSERT INTO MEMBER_TEST VALUES(
1,1234,12345,'000000-1111111','여',01012345678,'경기도 성남시', 'N');

INSERT INTO MEMBER_TEST VALUES(
2,12348,'SDSD','000000-1111222','남',01012345678,'서울시 동대문구', 'N');

INSERT INTO MEMBER_TEST VALUES(
3,12345,'PWPW','000000-1111333','여',01012345678,'서울시 노원구', 'Y');

COMMIT;

COMMENT ON COLUMN  MEMBER_TEST.USER_NO  IS '회원번호';
COMMENT ON COLUMN  MEMBER_TEST.USER_ID IS '회원아이디';
COMMENT ON COLUMN  MEMBER_TEST.USER_PWD  IS '회원비밀번호';
COMMENT ON COLUMN  MEMBER_TEST.PNO  IS '주민등록번호';
COMMENT ON COLUMN  MEMBER_TEST.GENDER  IS '성별';
COMMENT ON COLUMN  MEMBER_TEST.PHONE  IS '연락처';
COMMENT ON COLUMN  MEMBER_TEST.ADDRESS  IS '주소';
COMMENT ON COLUMN  MEMBER_TEST.STATUS  IS '탈퇴여부';

COMMIT;

SELECT COMMENTS FROM USER_COL_COMMENTS  WHERE COMMENTS IS NOT NULL;



-- 2-1. MOVIE TABLE 생성

CREATE TABLE MOVIE (
	ID VARCHAR2(100) PRIMARY KEY,
	TITLE VARCHAR2(100),
	CONTENT VARCHAR2(100),
	ACTOR VARCHAR2(100)
);

INSERT INTO MOVIE VALUES ('m1','블랙아담','액션','드웨인 존슨');
INSERT INTO MOVIE VALUES ('m2','리멤버','드라마','남주혁');
INSERT INTO MOVIE VALUES ('m3','자백','스릴러','소지섭');
COMMIT;

SELECT * FROM MOVIE;

SELECT * FROM MOVIE WHERE ID='m1';
UPDATE MOVIE SET CONTENT='스릴러'  WHERE ID='m1';
COMMIT;

DELETE FROM MOVIE WHERE ID='m1';
COMMIT;


-- 2-2. PLACE TABLE 생성

CREATE TABLE PLACE(

	ID VARCHAR2(100) PRIMARY KEY,
	NAME VARCHAR2(100),
	ADDR VARCHAR2(100),
	TEL VARCHAR2(100)
);

INSERT INTO PLACE VALUES('p1','cgv','강남구 삼성동','02-555');
INSERT INTO PLACE VALUES('p2','megabox','강남구 역삼동','02-666');
INSERT INTO PLACE VALUES('p3','lotte','강남구 대치동','02-777');
COMMIT;

SELECT * FROM PLACE;

SELECT * FROM PLACE WHERE NAME='cgv';

UPDATE PLACE 
SET TEL='02-888' 
WHERE NAME='lotte';

COMMIT;

DELETE FROM PLACE WHERE ID='p3';
COMMIT;

DELETE FROM PLACE;
DELETE FROM MOVIE;
COMMIT;

DROP TABLE PLACE;
DROP TABLE MOVIE;



-- 3. ERD 해석
CREATE TABLE STUDENT(
	ID VARCHAR2(100) PRIMARY KEY,
	NAME VARCHAR2(100),
	TEL VARCHAR2(100),
	DEPTID NUMBER(20) CONSTRAINT FK1 REFERENCES DEPT(DEPTNO),
	PROFESSORID VARCHAR2(100)
);

CREATE TABLE PROFESSOR(
	ID VARCHAR2(100) PRIMARY KEY,
	NAME VARCHAR2(100),
	TEL VARCHAR2(100),
	DEPTID NUMBER(20) CONSTRAINT FK2 REFERENCES DEPT(DEPTNO),
	ADDR VARCHAR2(100),
	ROOMNO VARCHAR2(100)
);


-- 4. DDL, DML 확인문제

-- 4-1.
CREATE TABLE DEPART(
	ID VARCHAR2(100) PRIMARY KEY,
	NAME VARCHAR2(100),
	INSTRUCTOR VARCHAR2(100)
);

SELECT * FROM DEPART;

INSERT INTO DEPART VALUES('1','지연','교수1');
INSERT INTO DEPART VALUES('2','지강','교수2');
COMMIT;

-- 4-2.
CREATE TABLE STUDENT(
	ID VARCHAR2(100) PRIMARY KEY,
	NAME VARCHAR2(100) NOT NULL,
	TEL VARCHAR2(100),
	DEPART_ID VARCHAR2(100) CONSTRAINT FK3
	REFERENCES DEPART(ID)
);

SELECT * FROM STUDENT;

INSERT INTO STUDENT VALUES('1','지연','010','1');
INSERT INTO STUDENT VALUES('2','지강','011','2');
COMMIT;

-- 4-3.
CREATE TABLE SUBJECT(
	ID VARCHAR2(100) PRIMARY KEY,
	TITLE VARCHAR2(100),
	DEPART_ID VARCHAR2(100) CONSTRAINT FK4
	REFERENCES DEPART(ID)
);

SELECT * FROM SUBJECT;

INSERT INTO SUBJECT VALUES('1','지연','1');
INSERT INTO SUBJECT VALUES('2','지강','2');
COMMIT;


DROP TABLE DEPART CASCADE CONSTRAINTS;
DROP TABLE STUDENT;
DROP TABLE SUBJECT;








